/*!
 * @preserve
 *
 * Readmore.js jQuery plugin
 * Author: @jed_foster
 * Project home: http://jedfoster.github.io/Readmore.js
 * Licensed under the MIT license
 *
 * Debounce function from http://davidwalsh.name/javascript-debounce-function
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(u){function l(c,d,a){var h;return function(){var t=this,e=arguments,i=function(){h=null,a||c.apply(t,e)},o=a&&!h;clearTimeout(h),h=setTimeout(i,d),o&&c.apply(t,e)}}function j(a){var c=++k;return String(null==a?"rmjs-":a)+c}function f(h){var r=h.clone().css({height:"auto",width:h.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(h),d=r.outerHeight(),s=parseInt(r.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),w=h.data("defaultHeight");r.remove();var c=s||h.data("collapsedHeight")||w;h.data({expandedHeight:d,maxHeight:s,collapsedHeight:c}).css({maxHeight:"none"})}function g(a){if(!m[a.selector]){var c=" ";a.embedCSS&&""!==a.blockCSS&&(c+=a.selector+" + [data-readmore-toggle], "+a.selector+"[data-readmore]{"+a.blockCSS+"}"),c+=a.selector+"[data-readmore]{transition: height "+a.speed+"ms;overflow: hidden;}",function(h,n){var d=h.createElement("style");d.type="text/css",d.styleSheet?d.styleSheet.cssText=n:d.appendChild(h.createTextNode(n)),h.getElementsByTagName("head")[0].appendChild(d)}(document,c),m[a.selector]=!0}}function q(c,a){this.element=c,this.options=u.extend({},b,a),g(this.options),this._defaults=b,this._name=v,this.init(),window.addEventListener?(window.addEventListener("load",p),window.addEventListener("resize",p)):(window.attachEvent("load",p),window.attachEvent("resize",p))}var v="readmore",b={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,blockProcessed:function(){},beforeToggle:function(){},afterToggle:function(){}},m={},k=0,p=l(function(){u("[data-readmore]").each(function(){var c=u(this),a="true"===c.attr("aria-expanded");f(c),c.css({height:c.data(a?"expandedHeight":"collapsedHeight")})})},100);q.prototype={init:function(){var i=u(this.element);i.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),f(i);var o=i.data("collapsedHeight"),c=i.data("heightMargin");if(i.outerHeight(!0)<=o+c){return this.options.blockProcessed&&"function"==typeof this.options.blockProcessed&&this.options.blockProcessed(i,!1),!0}var d=i.attr("id")||j(),h=this.options.startOpen?this.options.lessLink:this.options.moreLink;i.attr({"data-readmore":"","aria-expanded":this.options.startOpen,id:d}),i.after(u(h).on("click",function(a){return function(e){a.toggle(this,i[0],e)}}(this)).attr({"data-readmore-toggle":d,"aria-controls":d})),this.options.startOpen||i.css({height:o}),this.options.blockProcessed&&"function"==typeof this.options.blockProcessed&&this.options.blockProcessed(i,!0)},toggle:function(x,h,z){z&&z.preventDefault(),x||(x=u('[aria-controls="'+this.element.id+'"]')[0]),h||(h=this.element);var A=u(h),c="",t="",w=!1,y=A.data("collapsedHeight");A.height()<=y?(c=A.data("expandedHeight")+"px",t="lessLink",w=!0):(c=y,t="moreLink"),this.options.beforeToggle&&"function"==typeof this.options.beforeToggle&&this.options.beforeToggle(x,A,!w),A.css({height:c}),A.on("transitionend",function(a){return function(){a.options.afterToggle&&"function"==typeof a.options.afterToggle&&a.options.afterToggle(x,A,w),u(this).attr({"aria-expanded":w}).off("transitionend")}}(this)),u(x).replaceWith(u(this.options[t]).on("click",function(a){return function(d){a.toggle(this,h,d)}}(this)).attr({"data-readmore-toggle":A.attr("id"),"aria-controls":A.attr("id")}))},destroy:function(){u(this.element).each(function(){var a=u(this);a.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),a.removeData()})}},u.fn.readmore=function(c){var a=arguments,d=this.selector;return c=c||{},"object"==typeof c?this.each(function(){if(u.data(this,"plugin_"+v)){var e=u.data(this,"plugin_"+v);e.destroy.apply(e)}c.selector=d,u.data(this,"plugin_"+v,new q(this,c))}):"string"==typeof c&&"_"!==c[0]&&"init"!==c?this.each(function(){var e=u.data(this,"plugin_"+v);e instanceof q&&"function"==typeof e[c]&&e[c].apply(e,Array.prototype.slice.call(a,1))}):void 0}});