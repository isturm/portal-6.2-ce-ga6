Liferay.Util.portletTitleEdit=function(){};if(!themeDisplay.isStatePopUp()){AUI().ready("aui-live-search-deprecated","aui-overlay-context-panel-deprecated","event-mouseenter","liferay-message","liferay-store","node-focusmanager","transition",function(b){var j=b.getBody();var m="";var d=false;var i="show-portlet-description-"+m;var e=b.Lang.trim;var c="display-panel-columns";var a="panels-minimized";var g="search-panel-active";var k={persist:true};var l="#controlPanelMenuAddContentPanelContainer ul li a";var f='<a class="icon-remove cancel-search" href="javascript:;"></a>';var n='<div class="minimize-panels"><a class="close-panel-button" href="javascript:;"><span>'+Liferay.Language.get("minimize-panels")+"</span></a></div>";var h={init:function(){var o=this;o._renderUI();o._bindUI()},_afterHiddenChange:function(p){var o=this;o._uiSetHidden(p.newVal,p.persist)},_bindUI:function(){var o=this;var p=o._panelHolder;if(p){Liferay.set("controlPanelSidebarHidden",j.hasClass(a));Liferay.after("controlPanelSidebarHiddenChange",o._afterHiddenChange,o);if(j.hasClass(a)){o._panelHolderAccordionHandle=o._panelHolderAccordionDisable();p.delegate("click",o._panelHolderHandleClick,".toggler-header");o._controlPanelTools.on("click",o._toggleHidden,o)}o._panelToggleButton.on("click",o._toggleHidden,o)}if(o._searchPanelHolder){Liferay.publish("focusSearchBar",{defaultFn:b.bind("_focusSearchBar",o)});b.getDoc().on("keyup",function(q){if(q.isKey("ESC")){Liferay.fire("focusSearchBar")}})}},_createCancelButton:function(){var p=this;var o=b.Node.create(f);p._searchPanelHolder.append(o);var q=b.all(l);o.on("click",function(r){j.removeClass(g);p._searchPanelInput.val("").focus();q.show();p._searchActive=false})},_createFocusManager:function(){var o=this;var q=b.one("#controlPanelMenuAddContentPanelContainer");q.plug(b.Plugin.NodeFocusManager,{descendants:".toggler-content ul li a:visible",keys:{next:"down:40",previous:"down:38"}});var p=q.focusManager;o._refreshFocusManagerTask=b.debounce(p.refresh,50,p);o._searchPanelInput.on("key",function(r){p.focus(0)},"down:40")},_createLiveSearch:function(){var o=this;var q=o._searchPanelInput;var p=new b.LiveSearch({input:q,nodes:l,data:function(r){return r.text()},on:{search:function(r){if(e(p.get("searchValue"))){j.addClass(g);o._searchActive=true}}},after:{search:function(r){o._searchActive=true;o._refreshFocusManagerTask();if(!e(p.get("searchValue"))){j.removeClass(g);o._searchActive=false}}}});o._liveSearch=p},_focusSearchBar:function(p){var o=this;o._searchPanelInput.selectText()},_panelHolderAccordionDisable:function(){var o=Liferay.component("_160_controlPanelMenuAddContentPanelContainer");var p=b.on(function(q){return new b.Do.Prevent()},o,"headerEventHandler");return p},_panelHolderCollapse:function(){var o=this;j.addClass(a)},_panelHolderExpand:function(){var o=this;j.removeClass(a)},_panelHolderHandleClick:function(o){var q=o.currentTarget;var p=q.ancestor(".accordion-group");p.toggleClass("open");q.once("clickoutside",function(){p.removeClass("open")})},_renderUI:function(){var o=this;var q=b.one(".control-panel-tools");var s=b.Node.create(n);var u=b.one(".panel-page-menu");var t=s.one("a");var p=b.one(".search-panels");if(u){var r=u.ancestor().one(".panel-page-body");u.append(s);o._controlPanelTools=q;o._panelHolderAccordionHandle=null;o._panelHolder=u;o._panelPageBody=r;o._panelToggleButton=t;o._togglePanels=s}if(p){var v=p.one("#_160_searchPanel");v.attr("autocomplete","off");o._searchPanelHolder=p;o._searchPanelInput=v;o._createCancelButton();o._createFocusManager();o._createLiveSearch()}},_toggleHidden:function(p){var o=this;Liferay.set("controlPanelSidebarHidden",!Liferay.get("controlPanelSidebarHidden"),k)},_uiSetHidden:function(p,q){var o=this;if(q){Liferay.Store("control-panel-sidebar-minimized",p)}if(j.hasClass(a)){o._panelHolder.detach();o._panelHolderExpand();o._controlPanelTools.detach("click");if(o._panelHolderAccordionHandle){o._panelHolderAccordionHandle.detach()}}else{o._panelHolderAccordionHandle=o._panelHolderAccordionDisable();o._panelHolderCollapse();o._panelHolder.delegate("click",o._panelHolderHandleClick,".toggler-header");o._controlPanelTools.on("click",o._toggleHidden,o)}},_searchActive:false,_searchValue:""};h.init()})};